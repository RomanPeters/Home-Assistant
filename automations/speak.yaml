- id: speak_welcome_home
  alias: Speak Welcome home
  trigger:
    - platform: state
      entity_id: group.roman
      to: home
    - platform: state
      entity_id: group.nadine
      to: home
  condition:
    - condition: template
      value_template: "{{ not is_state('input_select.home_status', 'Night') }}"
  action:
    - service: tts.google_say
      data_template:      
        entity_id: media_player.apple_tv
        message: "Welcome home, {{ trigger.entity_id.split('.')[-1] }}"

- id: speak_home_status_to_away
  alias: Speak Home Status to Away
  trigger:
    - platform: state
      entity_id: input_select.home_status
      to: Away
      from: Home
  action:
    - service: tts.google_say
      data_template: 
        entity_id: media_player.apple_tv
        message: >
          Good bye,
          {% if is_state('group.roman', 'home') and is_state('group.nadine', 'home') %}
            Roman and Nadine.
          {% elif is_state('group.roman', 'home') %}
            Roman.
          {% elif is_state('group.nadine', 'home') %}
            Nadine.
          {% endif %}
