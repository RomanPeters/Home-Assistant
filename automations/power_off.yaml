
- id: start_power_off
  alias: 'Start power off'

  trigger: # Explicit in order to ignore `to: '0'`
    - platform: state
      entity_id: input_select.power_off
      to: '1'
    - platform: state
      entity_id: input_select.power_off
      to: '5'
    - platform: state
      entity_id: input_select.power_off
      to: '15'
    - platform: state
      entity_id: input_select.power_off
      to: '30'
    - platform: state
      entity_id: input_select.power_off
      to: '60'
    - platform: state
      entity_id: input_select.power_off
      to: '120'

  action:
    - service: script.power_off


# When script.power_off gets activated
- id: power_off_script_activated
  alias: Power_off script activated

  trigger:
    - platform: state
      entity_id: script.power_off
      to: 'on'

  action:
    # Hide one group
    - service: group.set_visibility
      entity_id: group.power_off
      data:
        visible: False
    # Show another
    - service: group.set_visibility
      entity_id: group.power_off_activated
      data:
        visible: True

# When script.power_off gets deactivated
- id: power_off_script_deactivated
  alias: Power_off script deactivated
  trigger:
    - platform: state
      entity_id: script.power_off
      to: 'off'

  action:
    # Hide one group
    - service: group.set_visibility
      entity_id: group.power_off_activated
      data:
        visible: False
    # Show another
    - service: group.set_visibility
      entity_id: group.power_off
      data:
        visible: True
    # Reset selector
    - service: input_select.select_option
      data:
        entity_id: input_select.power_off
        option: 0