# Nightlight
- id: button_single
  alias: Toggle nightlight

  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001f4b7af
      click_type: single

  action:
    service: light.toggle
    entity_id: light.gateway_light_7811dce1e53e


# Goodbye
- id: button_double
  alias: Power off
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001f4b7af
      click_type: double

  action:
    service: script.turn_on
    entity_id: script.power_off

# Ringtone
- id: button_long_click_press
  alias: Play ringtone
  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001f4b7af
      click_type: long_click_press

  action:
    service: script.turn_on
    entity_id: script.ringtone

- id: button_hold
  alias: Stop ringtone

  trigger:
    platform: event
    event_type: click
    event_data:
      entity_id: binary_sensor.switch_158d0001f4b7af
      click_type: hold

  action:
    - service: xiaomi_aqara.stop_ringtone
      data:
        gw_mac: !secret xiaomi_aqara_mac

    - service: light.turn_off
      data_template:
        entity_id: >
          {% if is_state("input_boolean.alert_light", "on") %}
          light.gateway_light_7811dce1e53e
          {%- else -%}
          light.none
          {% endif %}


